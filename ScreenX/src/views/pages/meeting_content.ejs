<section class="w-full h-screen flex flex-col" data-meeting-id="<%= meetingId %>" data-meeting-pass="<%= meetingPassword || '' %>" data-is-host="<%= isHost %>" data-display-name="<%= typeof displayName !== 'undefined' ? displayName : '' %>">
  <!-- Video Grid - Now takes full width -->
  <div class="flex-1 relative overflow-hidden">
    <div id="video-grid" class="h-full p-4 overflow-auto video-grid-container"></div>
  </div>
  
  <!-- Floating Chat Widget - Fixed Top Right (Dedicated Position) -->
  <aside id="chatWidget" class="chat-widget">
    <!-- Chat Widget Header -->
    <div class="chat-widget-header">
      <div class="flex gap-2 flex-1">
        <button id="tabChat" class="tab tab-active">
          <i class="fas fa-comments mr-2"></i>Chat
        </button>
        <button id="tabAssistant" class="tab tab-inactive">
          <i class="fas fa-robot mr-2"></i>Assistant
        </button>
      </div>
      <div class="flex gap-2">
        <button id="toggleChatWidget" class="chat-widget-toggle" data-tooltip="Minimize Chat">
          <i class="fas fa-chevron-down"></i>
        </button>
        <button id="closeChatWidget" class="chat-widget-close" data-tooltip="Close Chat">
          <i class="fas fa-times"></i>
        </button>
      </div>
    </div>
    
    <!-- Chat Widget Body -->
    <div class="chat-widget-body">
      <!-- Regular Chat Panel -->
      <div id="chatPanel" class="chat-panel-content">
        <div id="chatMessages" class="chat-messages"></div>
        <div class="chat-input-container">
          <form id="chatForm" class="flex gap-2">
            <input id="chatInput" class="chat-input flex-1" placeholder="Type a message..." />
            <button type="submit" class="chat-send-btn" data-tooltip="Send">
              <i class="fas fa-paper-plane"></i>
            </button>
          </form>
          <div class="p-4 border-t border-gray-800 space-y-2 glass">
            <button id="btnSummary" class="btn btn-indigo w-full">
              <i class="fas fa-brain mr-2"></i>Generate AI Summary
            </button>
            <div id="summaryContainer" class="hidden mt-2">
              <div class="bg-gray-900 rounded p-3 border border-gray-700">
                <div class="flex items-center justify-between mb-2">
                  <h4 class="font-semibold text-white text-sm">ğŸ“‹ Meeting Summary</h4>
                  <div class="flex gap-1">
                    <button id="btnDownloadSummary" class="px-2 py-1 text-xs bg-gray-800 rounded hover:bg-gray-700 text-gray-300" title="Download Summary">
                      ğŸ’¾ Download
                    </button>
                    <button id="btnCloseSummary" class="px-2 py-1 text-xs bg-gray-800 rounded hover:bg-gray-700 text-gray-300" title="Close">
                      âœ•
                    </button>
                  </div>
                </div>
                <div id="summaryOutput" class="text-sm text-gray-300 whitespace-pre-wrap max-h-64 overflow-y-auto"></div>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- AI Chatbot Assistant Panel -->
      <div id="chatbotPanel" class="chat-panel-content hidden">
        <div class="p-3 border-b border-gray-800 bg-gradient-to-r from-indigo-900 to-purple-900 flex-shrink-0">
          <div class="flex items-center gap-2">
            <span class="text-2xl">ğŸ¤–</span>
            <div>
              <h3 class="font-semibold text-white">ScreenX Assistant</h3>
              <p class="text-xs text-gray-300">Your AI meeting helper</p>
            </div>
          </div>
        </div>
        <div id="chatbotMessages" class="flex-1 overflow-y-auto p-4 space-y-3 bg-gray-900 min-h-0"></div>
        <div class="p-3 border-t border-gray-800 bg-gray-900 flex-shrink-0">
          <form id="chatbotForm" class="flex gap-2">
            <input 
              id="chatbotInput" 
              type="text" 
              class="flex-1 p-2 bg-gray-800 rounded text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-indigo-500" 
              placeholder="Ask me anything..." 
              autocomplete="off"
            />
            <button 
              id="chatbotSend" 
              type="submit"
              class="px-4 py-2 bg-indigo-600 rounded hover:bg-indigo-700 text-white font-medium transition-colors"
            >
              Send
            </button>
          </form>
          <div class="mt-2 flex gap-2">
            <button id="btnQuickSummary" class="flex-1 px-2 py-1 text-xs bg-gray-800 rounded hover:bg-gray-700 text-gray-300">
              ğŸ“ Summarize
            </button>
            <button id="btnQuickHelp" class="flex-1 px-2 py-1 text-xs bg-gray-800 rounded hover:bg-gray-700 text-gray-300">
              â“ Help
            </button>
          </div>
        </div>
      </div>
    </div>
  </aside>
  
  <!-- Floating Toolbar -->
  <div class="floating-toolbar">
    <button id="btnToggleMic" class="toolbar-btn" data-tooltip="Mute/Unmute">
      <i class="fas fa-microphone"></i>
    </button>
    <button id="btnToggleCam" class="toolbar-btn" data-tooltip="Start/Stop Video">
      <i class="fas fa-video"></i>
    </button>
    <button id="btnShare" class="toolbar-btn" data-tooltip="Share Screen">
      <i class="fas fa-desktop"></i>
    </button>
    <button id="btnRecord" class="toolbar-btn" data-tooltip="Record Meeting">
      <i class="fas fa-circle"></i>
    </button>
    <button id="toggleChatBtn" class="toolbar-btn" data-tooltip="Toggle Chat">
      <i class="fas fa-comments" id="chatIcon"></i>
    </button>
    <% if (isHost) { %>
      <div class="w-px h-8 bg-gray-600 mx-1"></div>
      <button data-admin="mute" class="toolbar-btn" data-tooltip="Mute All">
        <i class="fas fa-microphone-slash"></i>
      </button>
      <button data-admin="lock" class="toolbar-btn" data-tooltip="Lock Meeting">
        <i class="fas fa-lock"></i>
      </button>
      <button data-admin="end" class="toolbar-btn danger" data-tooltip="End Meeting">
        <i class="fas fa-phone-slash"></i>
      </button>
    <% } %>
    <div class="w-px h-8 bg-gray-600 mx-1"></div>
    <button id="btnLeave" class="toolbar-btn danger" data-tooltip="Leave Meeting">
      <i class="fas fa-sign-out-alt"></i>
    </button>
  </div>
  
  <script src="/public/js/meeting.js"></script>
</section>


